// Filter example.
// ip_filter = make_ip_filter(['203.0.113.53', '203.0.113.114', '198.51.100.23', ...])

var ip_filter = "-g1c9hc 3 2 4 1 2 3 8 2 0 1 6 1 0 a 5 1-2 2 1-1 3 1 6 3 1 2 5 0 8 2 1 5 2-1 1 0 7 5 a 3 2 1 7 2 1 0 2 1 3 1 0 2 1 3 2 5 1 2 1 2 1 2 1 2 1 0 2 0 1 2 0 1 2 5 1 a 9 1 3 4 2 0 3 2 1 2 1 2 1 2 1-2 3 1byebq 1 4 1 0 2 7 1 5 1 0 2 3 2 0 1 3 2 1-4 4 1 2 7 9 8 1 2 1 2 8 3 4 2 1-5 2 1-1 6 1 5 1 4 1 2 1 4 5 3 7 2 1 3 0 1 2 1 0 5 3 4 0 g 4 2 0 1 2 0 1 0 2 1 6 1 2 0 1 0 4 0 2 1-2 4 1 3";

ip_filter = ip_filter.replace(/([0-9a-z])-/g, '$1 -').split(' ');

for (var i in ip_filter)
	ip_filter[i] = parseInt(ip_filter[i], 36);

function ip_to_number(ip_string)
{
	for (var index = 0, ip_number = 0
		, octets = ip_string.split('.')
		; index < ip_string.length
		; index++ )
		ip_number |= octets[index] << (8*(3-index));
	
	return ip_number;
}

function check_ip(ip)
{
	var ip_number = ip_to_number(ip);
	var repeat = 0
	
	for (var index in ip_filter)
	{
		var value = ip_filter[index];
		
		if (index == 0 || value > 0)
			ip_number -= (repeat = value);
		else
			for ( var counter = value
				; counter < 1 && ip_number > 0
				; counter++ )
				ip_number -= repeat;
		
		if (ip_number <= 0)
			return ip_number == 0;
	}
	
	return false;
}

/*// Filter test(WScript)

var test_ips = "203.0.113.53 203.0.113.114 198.51.100.23 198.51.100.233 198.51.100.159 198.51.100.152 198.51.100.52 203.0.113.168 198.51.100.94 203.0.113.219 203.0.113.244 198.51.100.254 203.0.113.207 198.51.100.247 198.51.100.28 203.0.113.230 203.0.113.104 198.51.100.86 203.0.113.113 198.51.100.104 198.51.100.221 203.0.113.216 203.0.113.215 198.51.100.149 203.0.113.214 203.0.113.38 203.0.113.254 198.51.100.236 198.51.100.241 198.51.100.3 198.51.100.180 203.0.113.157 203.0.113.228 198.51.100.109 198.51.100.57 203.0.113.132 198.51.100.147 203.0.113.165 203.0.113.115 198.51.100.55 203.0.113.148 203.0.113.48 198.51.100.163 203.0.113.185 203.0.113.242 198.51.100.193 198.51.100.212 203.0.113.5 198.51.100.173 203.0.113.44 198.51.100.174 203.0.113.72 198.51.100.35 203.0.113.97 203.0.113.103 198.51.100.70 203.0.113.133 203.0.113.10 198.51.100.54 198.51.100.59 203.0.113.167 198.51.100.27 203.0.113.164 203.0.113.135 203.0.113.158 203.0.113.28 198.51.100.58 203.0.113.41 198.51.100.15 198.51.100.179 203.0.113.109 203.0.113.212 198.51.100.191 198.51.100.76 203.0.113.201 203.0.113.27 198.51.100.36 203.0.113.30 203.0.113.136 198.51.100.106 198.51.100.151 198.51.100.148 198.51.100.183 198.51.100.231 203.0.113.127 203.0.113.181 203.0.113.140 203.0.113.101 198.51.100.201 198.51.100.5 203.0.113.4 203.0.113.105 203.0.113.250 203.0.113.46 198.51.100.177 198.51.100.196 198.51.100.165 203.0.113.236 198.51.100.170 198.51.100.248 203.0.113.155 198.51.100.110 203.0.113.37 198.51.100.225 198.51.100.10 198.51.100.249 203.0.113.47 198.51.100.74 203.0.113.122 203.0.113.33 198.51.100.202 198.51.100.108 198.51.100.73 203.0.113.43 203.0.113.205 203.0.113.83 203.0.113.121 203.0.113.108 203.0.113.81 203.0.113.246 203.0.113.9 198.51.100.135 198.51.100.81 198.51.100.25 203.0.113.251 203.0.113.80 203.0.113.232 203.0.113.94 203.0.113.240 203.0.113.210 198.51.100.184 203.0.113.20 203.0.113.243 203.0.113.49 198.51.100.137 198.51.100.51 198.51.100.145 198.51.100.182 198.51.100.160 198.51.100.238 198.51.100.122 203.0.113.106 203.0.113.161 203.0.113.86 203.0.113.128 198.51.100.102 203.0.113.169 198.51.100.171 198.51.100.138 203.0.113.45 203.0.113.174 198.51.100.222 198.51.100.156 203.0.113.56 203.0.113.26 198.51.100.239 198.51.100.186 203.0.113.145 198.51.100.96 203.0.113.21 198.51.100.188 198.51.100.0 198.51.100.132 198.51.100.176 203.0.113.177 198.51.100.250 203.0.113.110 203.0.113.112 198.51.100.157 203.0.113.231 198.51.100.189 203.0.113.84 198.51.100.53 203.0.113.226 203.0.113.63 198.51.100.229 203.0.113.13 198.51.100.244 198.51.100.194 203.0.113.218 198.51.100.117 198.51.100.155 203.0.113.54 203.0.113.11 203.0.113.35 198.51.100.12 203.0.113.245 198.51.100.46 203.0.113.225 203.0.113.107 198.51.100.60 198.51.100.97 198.51.100.245 198.51.100.251 198.51.100.9 198.51.100.34 198.51.100.242 203.0.113.209 198.51.100.64 198.51.100.63";

test_ips = test_ips.split(' ');

for (var i = 0; i < test_ips.length; i++)
	WScript.Echo( check_ip(test_ips[i]) ? "Yes": "No", test_ips[i]);

WScript.StdIn.Read(1);

//*/